#!/bin/sh

while getopts "k" OPT
do
    case ${OPT} in
        k)
            /usr/bin/killall gammastep 1>/dev/null 2>/dev/null && exit 0
            echo "gammastep is not running."
            exit 1
            ;;
        *) echo "invalid tag" && exit 1 ;;
    esac
done


main() {
    gamma() {
        /usr/bin/killall gammastep 1>/dev/null 2>/dev/null
        /usr/bin/gammastep -PO "$1" >/dev/null 2>&1 & disown
    }

    case $(date +%H) in
        06|0[7-8]) gamma 5000 ;;
        09|1[0-6]) gamma 6000 ;;
        17|1[8-9]|2[0-1]) gamma 4500 ;;
        2[2-3]|0[0-5]) gamma 4000 ;;
    esac
}

main
